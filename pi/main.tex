\documentclass[a4paper,12pt]{article}
\usepackage{polski}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{color}
\usepackage{csvsimple}
\usepackage{pgfplots}

\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}

\providecommand{\e}[1]{\ensuremath{\times 10^{#1}}}


\lstset{
    language=c,
    basicstyle=\footnotesize,
    numberstyle=\footnotesize,
    numbers=left,
    frame=single,
    commentstyle=\color{mygreen},
    tabsize=1,
    title=\lstname,
    escapeinside={\%*}{*)},
    breaklines=true,
    breakatwhitespace=true,
    framextopmargin=2pt,
    framexbottommargin=2pt,
    inputencoding=utf8,
    extendedchars=true,
    literate={ł}{{\/l}}1 {ń}{{\'n}}1,
}
\title{Program typu ping-pong}
\author{Rafał Selewońko}
\begin{document}
\maketitle
 
% pierwsza sekcja
\section{Zadanie}\label{sec:zadanie}
Napisać program obliczający liczbę Pi do określonej precyzji (należy przetestować na komputerach jaka będzie rozsądna wartość - tak aby program wykonywał się kilka sekund). Następnie należy zrównoleglić go przy pomocy OpenMP (dla różnej liczby wątków). Dodatkowo należy policzyć i sporządzić wykresy przyśpieszenia i wydajności. Do oceny należy przedstawić raport z wykonania zadania zawierający wydruk programu + wykresy.

\pagebreak
\section{Rozwiązanie}\label{sec:kod}

\lstinputlisting{main.c}

\section{Wyniki badań}

\begin{table}[t]
\centering
\csvautotabular{wyniki_czas.csv}
\caption{Czas w zależności od rozmiaru komunikatu.}
\label{tabela_czas}
\end{table}

\begin{figure}[ht!]
    \centering
	\begin{tikzpicture}
		\begin{axis}[xlabel={Rozmiar komunikatu}, ylabel={Czas}, legend style={legend pos=outer north east}]
		\addplot table [x=wielkosc, y=blokujacy, col sep=comma] {wyniki_czas.csv};
		\addplot table [x=wielkosc, y=nieblokujacy, col sep=comma, ] {wyniki_czas.csv};
		\addplot table [x=wielkosc, y=ping, col sep=comma, ] {wyniki_czas.csv};
		\legend{$blokujący$,$nieblokujący$,$ping$}
		\end{axis}
	\end{tikzpicture}
    \caption{Wykres czasu w zależności od rozmiaru komunikatu.}
    \label{wykres_czas}
\end{figure}

\begin{table}[t]
\centering
\csvautotabular{wyniki_przepustowosc.csv}
\caption{Czas w zależności od rozmiaru komunikatu.}
\label{tabela_przepustowosc}
\end{table}

\begin{figure}[ht!]
    \centering
	\begin{tikzpicture}
		\begin{axis}[xlabel={Rozmiar komunikatu}, ylabel={Przepustowość}, legend style={legend pos=outer north east}]
		\addplot table [x=wielkosc, y=blokujacy, col sep=comma] {wyniki_przepustowosc.csv};
		\addplot table [x=wielkosc, y=nieblokujacy, col sep=comma, ] {wyniki_przepustowosc.csv};
		\legend{$blokujacy$,$nieblokujacy$}
		\end{axis}
	\end{tikzpicture}
    \caption{Wykres czasu w zależności od rozmiaru komunikatu.}
    \label{wykres_przepustowosc}
\end{figure}

\end{document}
